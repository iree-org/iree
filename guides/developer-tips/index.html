
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://openxla.github.io/iree/guides/developer-tips/">
      
      
        <link rel="prev" href="../deployment-configurations/gpu-cuda-rocm/">
      
      
        <link rel="next" href="../../reference/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.18">
    
    
      
        <title>Developer tips and tricks - IREE</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto:300,300i,400,400i,700,700i%7CNoto+Sans+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto";--md-code-font:"Noto Sans Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/openxla.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iree-developer-tips-and-tricks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine base classes -->



<!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="Header"
  >

    <!-- Link to community home -->
    <a
      href="https://github.com/openxla/community"
      title="OpenXLA"
      class="md-header__button md-logo"
      aria-label="OpenXLA"
      data-md-component="logo"
    >
      
  <img src="../../assets/images/openxla-logo-lockup-white.svg" alt="logo">

    </a>

    <!-- Link to site home -->
    <a
      href="https://openxla.github.io/iree/"
      title="IREE"
      class="md-header__button md-logo"
      aria-label="IREE"
      data-md-component="logo"
    >
      <div class="md-header__title">
        IREE
      </div>
    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Developer tips and tricks
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette -->
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input
            class="md-option"
            data-md-color-media="(prefers-color-scheme: light)"
            data-md-color-scheme="default"
            data-md-color-primary=""
            data-md-color-accent=""
            
              aria-label="Switch to dark mode"
            
            type="radio"
            name="__palette"
            id="__palette_1"
          />
          
            <label
              class="md-header__button md-icon"
              title="Switch to dark mode"
              for="__palette_2"
              hidden
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          <input
            class="md-option"
            data-md-color-media="(prefers-color-scheme: dark)"
            data-md-color-scheme="slate"
            data-md-color-primary=""
            data-md-color-accent=""
            
              aria-label="Switch to light mode"
            
            type="radio"
            name="__palette"
            id="__palette_2"
          />
          
            <label
              class="md-header__button md-icon"
              title="Switch to light mode"
              for="__palette_1"
              hidden
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/openxla/iree" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openxla/iree
  </div>
</a>
      </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../building-from-source/" class="md-tabs__link">
        Building from source
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Guides
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../community/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine class according to configuration -->


  



<!-- Main navigation -->
<nav
  class="md-nav md-nav--primary md-nav--lifted"
  aria-label="Navigation"
  data-md-level="0"
>

  <!-- Community site logo / home page link -->
  <label class="md-nav__title" for="__drawer">
    <a
      href="https://github.com/openxla/community"
      title="IREE"
      class="md-nav__button md-logo"
      aria-label="IREE"
      data-md-component="logo"
    >
      
  <img src="../../assets/images/openxla-logo-lockup-white.svg" alt="logo">

    </a>
    <!-- Site title (nav item below links to site home) -->
    IREE
  </label>

  <!-- Repository information -->
  
    <div class="md-nav__source">
      <a href="https://github.com/openxla/iree" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openxla/iree
  </div>
</a>
    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../building-from-source/">Building from source</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Building from source
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building-from-source/getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building-from-source/android/" class="md-nav__link">
        Android cross-compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building-from-source/ios/" class="md-nav__link">
        iOS cross-compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building-from-source/riscv/" class="md-nav__link">
        RISC-V cross-compilation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Guides</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../ml-frameworks/">ML frameworks</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          ML frameworks
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml-frameworks/tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml-frameworks/tflite/" class="md-nav__link">
        TensorFlow Lite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml-frameworks/jax/" class="md-nav__link">
        JAX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml-frameworks/pytorch/" class="md-nav__link">
        PyTorch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../deployment-configurations/">Deployment configurations</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment configurations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment-configurations/cpu/" class="md-nav__link">
        CPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment-configurations/bare-metal/" class="md-nav__link">
        CPU - Bare-Metal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment-configurations/gpu-vulkan/" class="md-nav__link">
        GPU - Vulkan
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../deployment-configurations/gpu-cuda-rocm/" class="md-nav__link">
        GPU - CUDA/ROCm
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Other topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Other topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Developer tips and tricks
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Developer tips and tricks
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setting-compiler-options" class="md-nav__link">
    Setting compiler options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-vmfb-files" class="md-nav__link">
    Inspecting .vmfb files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dumping-executable-files" class="md-nav__link">
    Dumping executable files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-phase-by-phase" class="md-nav__link">
    Compiling phase by phase
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../reference/">Reference</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../reference/bindings/">API bindings</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          API bindings
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/bindings/c-api/" class="md-nav__link">
        C API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/bindings/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../reference/mlir-dialects/">MLIR dialects</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          MLIR dialects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
          Internal dialects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3_2">
          <span class="md-nav__icon md-icon"></span>
          Internal dialects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/Check/" class="md-nav__link">
        Check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/Flow/" class="md-nav__link">
        Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/HAL/" class="md-nav__link">
        HAL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/HALInline/" class="md-nav__link">
        HALInline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/HALLoader/" class="md-nav__link">
        HALLoader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/Stream/" class="md-nav__link">
        Stream
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/Util/" class="md-nav__link">
        Util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/VM/" class="md-nav__link">
        VM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/VMVX/" class="md-nav__link">
        VMVX
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3_3" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
          Public dialects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3_3">
          <span class="md-nav__icon md-icon"></span>
          Public dialects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/IREEInput/" class="md-nav__link">
        IREEInput
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/mlir-dialects/IREELinalgExt/" class="md-nav__link">
        IREELinalgExt
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Other topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Other topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimization-options/" class="md-nav__link">
        Optimization options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../community/">Community</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../community/blog/">Blog</a>
          
            <label for="__nav_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/blog/2021-10-15-cuda-backend/" class="md-nav__link">
        CUDA backend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/blog/2021-10-13-mmt4d/" class="md-nav__link">
        Work in progress on Matrix Multiplication on CPU
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../community/blog/2021-07-19-tflite-tosa/" class="md-nav__link">
        TFLite Support via TOSA
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setting-compiler-options" class="md-nav__link">
    Setting compiler options
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inspecting-vmfb-files" class="md-nav__link">
    Inspecting .vmfb files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dumping-executable-files" class="md-nav__link">
    Dumping executable files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-phase-by-phase" class="md-nav__link">
    Compiling phase by phase
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  



  
  


<h1 id="iree-developer-tips-and-tricks">IREE developer tips and tricks<a class="headerlink" href="#iree-developer-tips-and-tricks" title="Permanent link">link</a></h1>
<p>The IREE compiler is built using <a href="https://mlir.llvm.org/">MLIR</a>, so it naturally
supports the common
<a href="https://mlir.llvm.org/getting_started/Debugging/">MLIR debugging workflows</a>.
For areas where IREE differentiates itself, this page lists other helpful tips
and tricks.</p>
<h2 id="setting-compiler-options">Setting compiler options<a class="headerlink" href="#setting-compiler-options" title="Permanent link">link</a></h2>
<p>Tools such as <code>iree-compile</code> take options via command-line flags. Pass <code>--help</code>
to see the full list:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>iree-compile<span class="w"> </span>--help

<span class="go">OVERVIEW: IREE compilation driver</span>

<span class="go">USAGE: iree-compile [options] &lt;input file or &#39;-&#39; for stdin&gt;</span>

<span class="go">OPTIONS:</span>
<span class="go">  ...</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip - Options and the Python bindings</p>
<p>If you are using the Python bindings, options can be passed via the
<code>extra_args=["--flag"]</code> argument:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">iree.compiler</span> <span class="k">as</span> <span class="nn">ireec</span>

<span class="n">input_mlir</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">func.func @abs(</span><span class="si">%i</span><span class="s2">nput : tensor&lt;f32&gt;) -&gt; (tensor&lt;f32&gt;) {</span>
<span class="s2">  </span><span class="si">%r</span><span class="s2">esult = math.absf </span><span class="si">%i</span><span class="s2">nput : tensor&lt;f32&gt;</span>
<span class="s2">  return </span><span class="si">%r</span><span class="s2">esult : tensor&lt;f32&gt;</span>
<span class="s2">}&quot;&quot;&quot;</span>

<span class="n">compiled_module</span> <span class="o">=</span> <span class="n">ireec</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">compile_str</span><span class="p">(</span>
    <span class="n">input_mlir</span><span class="p">,</span>
    <span class="n">target_backends</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;llvm-cpu&quot;</span><span class="p">],</span>
<span class="hll">    <span class="n">extra_args</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;--mlir-timing&quot;</span><span class="p">])</span>
</span></code></pre></div>
</div>
<h2 id="inspecting-vmfb-files">Inspecting <code>.vmfb</code> files<a class="headerlink" href="#inspecting-vmfb-files" title="Permanent link">link</a></h2>
<p>The IREE compiler generates <a href="https://flatbuffers.dev/">FlatBuffer</a> files using
the <code>.vmfb</code> file extension, short for "Virtual Machine FlatBuffer", which can
then be loaded and executed using IREE's runtime.</p>
<details class="info">
<summary>Info - other output formats</summary>
<p>The IREE compiler can output different formats with the <code>`--output-format=</code>
flag:</p>
<table>
<thead>
<tr>
<th>Flag value</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--output-format=vm-bytecode</code> (default)</td>
<td>VM Bytecode (<code>.vmfb</code>) files</td>
</tr>
<tr>
<td><code>--output-format=vm-c</code></td>
<td>C source modules</td>
</tr>
</tbody>
</table>
<p>VM Bytecode files are usable across a range of deployment scenarios, while
C source modules provide low level connection points for constrained
environments like bare metal platforms.</p>
</details>
<p>By default, <code>.vmfb</code> files can be opened as zip files:</p>
<!-- TODO(scotttodd): add annotation (insiders only), qualifying "default" with
                      `--iree-vm-emit-polyglot-zip=true`
-->

<div class="highlight"><pre><span></span><code><span class="gp">$ </span>unzip<span class="w"> </span>-d<span class="w"> </span>simple_abs_cpu<span class="w"> </span>./simple_abs_cpu.vmfb

<span class="go">Archive:  ./simple_abs_cpu.vmfb</span>
<span class="go">  extracting: simple_abs_cpu/module.fb</span>
<span class="go">  extracting: simple_abs_cpu/abs_dispatch_0_system_elf_x86_64.so</span>
</code></pre></div>
<p>The embedded binary (here an ELF shared object with CPU code) can be parsed by
standard tools:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>readelf<span class="w"> </span>-Ws<span class="w"> </span>./simple_abs_cpu/abs_dispatch_0_system_elf_x86_64.so

<span class="go">Symbol table &#39;.dynsym&#39; contains 2 entries:</span>
<span class="go">  Num:    Value          Size Type    Bind   Vis      Ndx Name</span>
<span class="go">    0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND</span>
<span class="go">    1: 0000000000001760    17 FUNC    GLOBAL DEFAULT    7 iree_hal_executable_library_query</span>

<span class="go">Symbol table &#39;.symtab&#39; contains 42 entries:</span>
<span class="go">  Num:    Value          Size Type    Bind   Vis      Ndx Name</span>
<span class="go">    0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND</span>
<span class="go">    1: 0000000000000000     0 FILE    LOCAL  DEFAULT  ABS abs_dispatch_0</span>
<span class="go">    2: 0000000000001730    34 FUNC    LOCAL  DEFAULT    7 abs_dispatch_0_generic</span>
<span class="go">    3: 00000000000034c0    80 OBJECT  LOCAL  DEFAULT    8 iree_hal_executable_library_query_v0</span>
<span class="go">    4: 0000000000001780   111 FUNC    LOCAL  DEFAULT    7 iree_h2f_ieee</span>
<span class="go">    5: 00000000000017f0   207 FUNC    LOCAL  DEFAULT    7 iree_f2h_ieee</span>
<span class="go">    ...</span>
</code></pre></div>
<p>The <code>iree-dump-module</code> tool can also be used to see information about a given
<code>.vmfb</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>iree-dump-module<span class="w"> </span>simple_abs.vmfb

<span class="go">//===---------------------------------------------------------------------===//</span>
<span class="go">// @module : version 0</span>
<span class="go">//===---------------------------------------------------------------------===//</span>

<span class="go">Required Types:</span>
<span class="go">  [  0] i32</span>
<span class="go">  [  1] i64</span>
<span class="go">  [  2] !hal.allocator</span>
<span class="go">  [  3] !hal.buffer</span>
<span class="go">  ...</span>

<span class="go">Module Dependencies:</span>
<span class="go">  hal, version &gt;= 0, required</span>

<span class="go">Imported Functions:</span>
<span class="go">  [  0] hal.ex.shared_device() -&gt; (!vm.ref&lt;?&gt;)</span>
<span class="go">  [  1] hal.allocator.allocate(!vm.ref&lt;?&gt;, i32, i32, i64) -&gt; (!vm.ref&lt;?&gt;)</span>
<span class="go">  ...</span>

<span class="go">Exported Functions:</span>
<span class="go">  [  0] abs(!vm.ref&lt;?&gt;) -&gt; (!vm.ref&lt;?&gt;)</span>
<span class="go">  [  1] __init() -&gt; ()</span>

<span class="go">...</span>
</code></pre></div>
<h2 id="dumping-executable-files">Dumping executable files<a class="headerlink" href="#dumping-executable-files" title="Permanent link">link</a></h2>
<p>The <code>--iree-hal-dump-executable-*</code> flags instruct the compiler to save files
related to "executable translation" (code generation for a specific hardware
target) into a directory of your choosing. If you are interested in seeing which
operations in your input program were fused into a compute kernel or what device
code was generated for a given program structure, these flags are a great
starting point.</p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Files dumped</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>iree-hal-dump-executable-files-to</code></td>
<td>All files (meta-flag)</td>
</tr>
<tr>
<td><code>iree-hal-dump-executable-sources-to</code></td>
<td>Source <code>.mlir</code> files prior to HAL compilation</td>
</tr>
<tr>
<td><code>iree-hal-dump-executable-intermediates-to</code></td>
<td>Intermediate files (e.g. <code>.o</code> files, <code>.mlir</code> stages)</td>
</tr>
<tr>
<td><code>iree-hal-dump-executable-binaries-to</code></td>
<td>Binary files (e.g. <code>.so</code>, <code>.spv</code>, <code>.ptx</code>), as used in the <code>.vmfb</code></td>
</tr>
<tr>
<td><code>iree-hal-dump-executable-benchmarks-to</code></td>
<td>Standalone benchmark files for <code>iree-benchmark-module</code></td>
</tr>
</tbody>
</table>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">CPU</label><label for="__tabbed_1_2">GPU - Vulkan</label><label for="__tabbed_1_3">GPU - CUDA</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/iree/simple_abs/

<span class="gp">$ </span>iree-compile<span class="w"> </span>simple_abs.mlir<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--iree-hal-target-backends<span class="o">=</span>llvm-cpu<span class="w"> </span><span class="se">\</span>
<span class="hll"><span class="w">  </span>--iree-llvmcpu-link-embedded<span class="o">=</span><span class="nb">false</span><span class="w"> </span><span class="se">\</span>
</span><span class="hll"><span class="w">  </span>--iree-hal-dump-executable-files-to<span class="o">=</span>/tmp/iree/simple_abs<span class="w"> </span><span class="se">\</span>
</span><span class="w">  </span>-o<span class="w"> </span>/tmp/iree/simple_abs/simple_abs_cpu.vmfb

<span class="gp">$ </span>ls<span class="w"> </span>/tmp/iree/simple_abs

<span class="go">module_abs_dispatch_0.mlir</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64_benchmark.mlir</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64.codegen.bc</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64.linked.bc</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64.optimized.bc</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64.s</span>
<span class="go">module_abs_dispatch_0_system_elf_x86_64.so</span>
<span class="go">simple_abs_cpu.vmfb</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip - Embedded and system linking</p>
<p>The default value of <code>--iree-llvmcpu-link-embedded=true</code> generates
embedded ELF files. By disabling that flag, the compiler will produce
platform-standard <code>.so</code> files for Linux, <code>.dll</code> files for Windows, etc.
While embedded ELF files can be smaller and more portable, inspection of
artifacts is easier with platform-standard shared object files.</p>
</div>
<details class="tip">
<summary>Tip - Disassembling <code>.bc</code> files with <code>llvm-dis</code></summary>
<p>The <code>.bc</code> intermediate files use the
<a href="https://llvm.org/docs/BitCodeFormat.html">LLVM BitCode</a> format, which
can be disassembled using
<a href="https://llvm.org/docs/CommandGuide/llvm-dis.html"><code>llvm-dis</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="go">// Build `llvm-dis` from source as needed:</span>
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>iree-build/<span class="w"> </span>--target<span class="w"> </span>llvm-dis
<span class="gp">$ </span>iree-build/llvm-project/bin/llvm-dis<span class="w"> </span>--help

<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/tmp/iree/simple_abs/
<span class="gp">$ </span>llvm-dis<span class="w"> </span>module_abs_dispatch_0_system_elf_x86_64.codegen.bc
<span class="gp">$ </span>cat<span class="w"> </span>module_abs_dispatch_0_system_elf_x86_64.codegen.ll

<span class="go">; ModuleID = &#39;module_abs_dispatch_0_system_elf_x86_64.codegen.bc&#39;</span>
<span class="go">source_filename = &quot;abs_dispatch_0&quot;</span>
<span class="go">target triple = &quot;x86_64-linux-gnu&quot;</span>

<span class="gp">%</span><span class="nv">iree_hal_executable_library_header_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>i32,<span class="w"> </span>ptr,<span class="w"> </span>i32,<span class="w"> </span>i32<span class="w"> </span><span class="o">}</span>
<span class="gp">%</span><span class="nv">iree_hal_executable_dispatch_attrs_v0_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>i16,<span class="w"> </span>i16<span class="w"> </span><span class="o">}</span>

<span class="go">...</span>

<span class="go">define internal i32 @abs_dispatch_0_generic(</span>
<span class="go">    ptr noalias nonnull align 16 %0,</span>
<span class="go">    ptr noalias nonnull align 16 %1,</span>
<span class="go">    ptr noalias nonnull align 16 %2) #0 {</span>
<span class="gp">  %</span><span class="nv">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>%iree_hal_executable_dispatch_state_v0_t,<span class="w"> </span>ptr<span class="w"> </span>%1,<span class="w"> </span>align<span class="w"> </span><span class="m">8</span>,
<span class="gp">  %</span><span class="nv">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>extractvalue<span class="w"> </span>%iree_hal_executable_dispatch_state_v0_t<span class="w"> </span>%4,<span class="w"> </span><span class="m">10</span>,
<span class="gp">  %</span><span class="nv">6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>ptr,<span class="w"> </span>ptr<span class="w"> </span>%5,<span class="w"> </span>align<span class="w"> </span><span class="m">8</span>,
<span class="gp">  %</span><span class="nv">7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ptrtoint<span class="w"> </span>ptr<span class="w"> </span>%6<span class="w"> </span>to<span class="w"> </span>i64,
<span class="gp">  %</span><span class="nv">8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>and<span class="w"> </span>i64<span class="w"> </span>%7,<span class="w"> </span><span class="m">63</span>,
<span class="gp">  %</span><span class="nv">9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>icmp<span class="w"> </span>eq<span class="w"> </span>i64<span class="w"> </span>%8,<span class="w"> </span><span class="m">0</span>,
<span class="go">  call void @llvm.assume(i1 %9),</span>
<span class="gp">  %</span><span class="nv">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>%iree_hal_executable_dispatch_state_v0_t,<span class="w"> </span>ptr<span class="w"> </span>%1,<span class="w"> </span>align<span class="w"> </span><span class="m">8</span>,
<span class="gp">  %</span><span class="nv">11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>extractvalue<span class="w"> </span>%iree_hal_executable_dispatch_state_v0_t<span class="w"> </span>%10,<span class="w"> </span><span class="m">10</span>,
<span class="gp">  %</span><span class="nv">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>getelementptr<span class="w"> </span>ptr,<span class="w"> </span>ptr<span class="w"> </span>%11,<span class="w"> </span>i32<span class="w"> </span><span class="m">1</span>,
<span class="gp">  %</span><span class="nv">13</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>ptr,<span class="w"> </span>ptr<span class="w"> </span>%12,<span class="w"> </span>align<span class="w"> </span><span class="m">8</span>,
<span class="gp">  %</span><span class="nv">14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ptrtoint<span class="w"> </span>ptr<span class="w"> </span>%13<span class="w"> </span>to<span class="w"> </span>i64,
<span class="gp">  %</span><span class="nv">15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>and<span class="w"> </span>i64<span class="w"> </span>%14,<span class="w"> </span><span class="m">63</span>,
<span class="gp">  %</span><span class="nv">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>icmp<span class="w"> </span>eq<span class="w"> </span>i64<span class="w"> </span>%15,<span class="w"> </span><span class="m">0</span>,
<span class="go">  call void @llvm.assume(i1 %16),</span>
<span class="gp">  %</span><span class="nv">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>float,<span class="w"> </span>ptr<span class="w"> </span>%6,<span class="w"> </span>align<span class="w"> </span><span class="m">4</span>,
<span class="gp">  %</span><span class="nv">18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>call<span class="w"> </span>float<span class="w"> </span>@llvm.fabs.f32<span class="o">(</span>float<span class="w"> </span>%17<span class="o">)</span>,
<span class="go">  store float %18, ptr %13, align 4,</span>
<span class="go">  ret i32 0,</span>
<span class="go">}</span>

<span class="go">...</span>
</code></pre></div>
</details>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/iree/simple_abs/

<span class="gp">$ </span>iree-compile<span class="w"> </span>simple_abs.mlir<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--iree-hal-target-backends<span class="o">=</span>vulkan-spirv<span class="w"> </span><span class="se">\</span>
<span class="hll"><span class="w">  </span>--iree-hal-dump-executable-files-to<span class="o">=</span>/tmp/iree/simple_abs<span class="w"> </span><span class="se">\</span>
</span><span class="w">  </span>-o<span class="w"> </span>/tmp/iree/simple_abs/simple_abs_vulkan.vmfb

<span class="gp">$ </span>ls<span class="w"> </span>/tmp/iree/simple_abs

<span class="go">module_abs_dispatch_0.mlir</span>
<span class="go">module_abs_dispatch_0_vulkan_spirv_fb_benchmark.mlir</span>
<span class="go">module_abs_dispatch_0_vulkan_spirv_fb.mlir</span>
<span class="go">module_abs_dispatch_0_vulkan_spirv_fb.spv</span>
<span class="go">simple_abs_vulkan.vmfb</span>
</code></pre></div>
<details class="tip">
<summary>Tip - Disassembling <code>.spv</code> files with <code>spirv-dis</code></summary>
<p>The <code>.spv</code> files use the
<a href="https://registry.khronos.org/SPIR-V/">SPIR-V</a> binary format, which can
be disassembled using <code>spirv-dis</code> from
<a href="https://github.com/KhronosGroup/SPIRV-Tools">SPIR-V Tools</a>:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/tmp/iree/simple_abs/
<span class="gp">$ </span>spirv-dis<span class="w"> </span>module_abs_dispatch_0_vulkan_spirv_fb.spv

<span class="go">; SPIR-V</span>
<span class="go">; Version: 1.0</span>
<span class="go">; Generator: Khronos; 22</span>
<span class="go">; Bound: 20</span>
<span class="go">; Schema: 0</span>
<span class="go">              OpCapability Shader</span>
<span class="go">              OpExtension &quot;SPV_KHR_storage_buffer_storage_class&quot;</span>
<span class="gp">        %</span><span class="nv">18</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpExtInstImport<span class="w"> </span><span class="s2">&quot;GLSL.std.450&quot;</span>
<span class="go">              OpMemoryModel Logical GLSL450</span>
<span class="go">              OpEntryPoint GLCompute %abs_dispatch_0_generic &quot;abs_dispatch_0_generic&quot;</span>
<span class="go">              OpExecutionMode %abs_dispatch_0_generic LocalSize 1 1 1</span>
<span class="go">              OpName %__resource_var_0_0_ &quot;__resource_var_0_0_&quot;</span>
<span class="go">              OpName %__resource_var_0_1_ &quot;__resource_var_0_1_&quot;</span>
<span class="go">              OpName %abs_dispatch_0_generic &quot;abs_dispatch_0_generic&quot;</span>
<span class="go">              OpDecorate %_arr_float_uint_1 ArrayStride 4</span>
<span class="go">              OpMemberDecorate %_struct_2 0 Offset 0</span>
<span class="go">              OpDecorate %_struct_2 Block</span>
<span class="go">              OpDecorate %__resource_var_0_0_ Binding 0</span>
<span class="go">              OpDecorate %__resource_var_0_0_ DescriptorSet 0</span>
<span class="go">              OpDecorate %__resource_var_0_1_ Binding 1</span>
<span class="go">              OpDecorate %__resource_var_0_1_ DescriptorSet 0</span>
<span class="gp">      %</span><span class="nv">float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeFloat<span class="w"> </span><span class="m">32</span>
<span class="gp">      %</span><span class="nv">uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeInt<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">0</span>
<span class="gp">    %</span><span class="nv">uint_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpConstant<span class="w"> </span>%uint<span class="w"> </span><span class="m">1</span>
<span class="gp">%</span><span class="nv">_arr_float_uint_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeArray<span class="w"> </span>%float<span class="w"> </span>%uint_1
<span class="gp">  %</span><span class="nv">_struct_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeStruct<span class="w"> </span>%_arr_float_uint_1
<span class="gp">%</span><span class="nv">_ptr_StorageBuffer__struct_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypePointer<span class="w"> </span>StorageBuffer<span class="w"> </span>%_struct_2
<span class="gp">%</span><span class="nv">__resource_var_0_0_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpVariable<span class="w"> </span>%_ptr_StorageBuffer__struct_2<span class="w"> </span>StorageBuffer
<span class="gp">%</span><span class="nv">__resource_var_0_1_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpVariable<span class="w"> </span>%_ptr_StorageBuffer__struct_2<span class="w"> </span>StorageBuffer
<span class="gp">      %</span><span class="nv">void</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeVoid
<span class="gp">          %</span><span class="nv">9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypeFunction<span class="w"> </span>%void
<span class="gp">    %</span><span class="nv">uint_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpConstant<span class="w"> </span>%uint<span class="w"> </span><span class="m">0</span>
<span class="gp">%</span><span class="nv">_ptr_StorageBuffer_float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpTypePointer<span class="w"> </span>StorageBuffer<span class="w"> </span>%float
<span class="gp">%</span><span class="nv">abs_dispatch_0_generic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpFunction<span class="w"> </span>%void<span class="w"> </span>None<span class="w"> </span>%9
<span class="gp">        %</span><span class="nv">12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpLabel
<span class="gp">        %</span><span class="nv">15</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpAccessChain<span class="w"> </span>%_ptr_StorageBuffer_float<span class="w"> </span>%__resource_var_0_0_<span class="w"> </span>%uint_0<span class="w"> </span>%uint_0
<span class="gp">        %</span><span class="nv">16</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpLoad<span class="w"> </span>%float<span class="w"> </span>%15
<span class="gp">        %</span><span class="nv">17</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpExtInst<span class="w"> </span>%float<span class="w"> </span>%18<span class="w"> </span>FAbs<span class="w"> </span>%16
<span class="gp">        %</span><span class="nv">19</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>OpAccessChain<span class="w"> </span>%_ptr_StorageBuffer_float<span class="w"> </span>%__resource_var_0_1_<span class="w"> </span>%uint_0<span class="w"> </span>%uint_0
<span class="go">              OpStore %19 %17</span>
<span class="go">              OpReturn</span>
<span class="go">              OpFunctionEnd</span>
</code></pre></div>
</details>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/tmp/iree/simple_abs/

<span class="gp">$ </span>iree-compile<span class="w"> </span>simple_abs.mlir<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--iree-hal-target-backends<span class="o">=</span>cuda<span class="w"> </span><span class="se">\</span>
<span class="hll"><span class="w">  </span>--iree-hal-dump-executable-files-to<span class="o">=</span>/tmp/iree/simple_abs<span class="w"> </span><span class="se">\</span>
</span><span class="w">  </span>-o<span class="w"> </span>/tmp/iree/simple_abs/simple_abs_cuda.vmfb

<span class="gp">$ </span>ls<span class="w"> </span>/tmp/iree/simple_abs

<span class="go">module_abs_dispatch_0_cuda_nvptx_fb_benchmark.mlir</span>
<span class="go">module_abs_dispatch_0_cuda_nvptx_fb.codegen.bc</span>
<span class="go">module_abs_dispatch_0_cuda_nvptx_fb.linked.bc</span>
<span class="go">module_abs_dispatch_0_cuda_nvptx_fb.optimized.bc</span>
<span class="go">module_abs_dispatch_0_cuda_nvptx_fb.ptx</span>
<span class="go">module_abs_dispatch_0.mlir</span>
<span class="go">simple_abs_cuda.vmfb</span>
</code></pre></div>
<details class="tip">
<summary>Tip - Disassembling <code>.bc</code> files with <code>llvm-dis</code></summary>
<p>The <code>.bc</code> intermediate files use the
<a href="https://llvm.org/docs/BitCodeFormat.html">LLVM BitCode</a> format, which
can be disassembled using
<a href="https://llvm.org/docs/CommandGuide/llvm-dis.html"><code>llvm-dis</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="go">// Build `llvm-dis` from source as needed:</span>
<span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>iree-build/<span class="w"> </span>--target<span class="w"> </span>llvm-dis
<span class="gp">$ </span>iree-build/llvm-project/bin/llvm-dis<span class="w"> </span>--help

<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/tmp/iree/simple_abs/
<span class="gp">$ </span>llvm-dis<span class="w"> </span>module_abs_dispatch_0_cuda_nvptx_fb.codegen.bc
<span class="gp">$ </span>cat<span class="w"> </span>module_abs_dispatch_0_cuda_nvptx_fb.codegen.ll

<span class="go">; ModuleID = &#39;module_abs_dispatch_0_cuda_nvptx_fb.codegen.bc&#39;</span>
<span class="go">source_filename = &quot;abs_dispatch_0&quot;</span>

<span class="go">declare ptr @malloc(i64)</span>

<span class="go">declare void @free(ptr)</span>

<span class="go">declare float @__nv_fabsf(float)</span>

<span class="go">define void @abs_dispatch_0_generic(ptr noalias readonly align 16 %0, ptr noalias align 16 %1) {</span>
<span class="gp">  %</span><span class="nv">3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ptrtoint<span class="w"> </span>ptr<span class="w"> </span>%0<span class="w"> </span>to<span class="w"> </span>i64
<span class="gp">  %</span><span class="nv">4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>and<span class="w"> </span>i64<span class="w"> </span>%3,<span class="w"> </span><span class="m">63</span>
<span class="gp">  %</span><span class="nv">5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>icmp<span class="w"> </span>eq<span class="w"> </span>i64<span class="w"> </span>%4,<span class="w"> </span><span class="m">0</span>
<span class="go">  call void @llvm.assume(i1 %5)</span>
<span class="gp">  %</span><span class="nv">6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>ptrtoint<span class="w"> </span>ptr<span class="w"> </span>%1<span class="w"> </span>to<span class="w"> </span>i64
<span class="gp">  %</span><span class="nv">7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>and<span class="w"> </span>i64<span class="w"> </span>%6,<span class="w"> </span><span class="m">63</span>
<span class="gp">  %</span><span class="nv">8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>icmp<span class="w"> </span>eq<span class="w"> </span>i64<span class="w"> </span>%7,<span class="w"> </span><span class="m">0</span>
<span class="go">  call void @llvm.assume(i1 %8)</span>
<span class="gp">  %</span><span class="nv">9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>load<span class="w"> </span>float,<span class="w"> </span>ptr<span class="w"> </span>%0,<span class="w"> </span>align<span class="w"> </span><span class="m">4</span>
<span class="gp">  %</span><span class="nv">10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>call<span class="w"> </span>float<span class="w"> </span>@__nv_fabsf<span class="o">(</span>float<span class="w"> </span>%9<span class="o">)</span>
<span class="go">  store float %10, ptr %1, align 4</span>
<span class="go">  ret void</span>
<span class="go">}</span>

<span class="go">!nvvm.annotations = !{!0, !1, !2, !3}</span>

<span class="go">!0 = !{ptr @abs_dispatch_0_generic, !&quot;kernel&quot;, i32 1}</span>
<span class="go">!1 = !{ptr @abs_dispatch_0_generic, !&quot;maxntidx&quot;, i32 1}</span>
<span class="go">!2 = !{ptr @abs_dispatch_0_generic, !&quot;maxntidy&quot;, i32 1}</span>
<span class="go">!3 = !{ptr @abs_dispatch_0_generic, !&quot;maxntidz&quot;, i32 1}</span>
</code></pre></div>
</details>
</div>
</div>
</div>
<!-- TODO(scotttodd): Link to a playground Colab notebook that dumps files? -->

<h2 id="compiling-phase-by-phase">Compiling phase by phase<a class="headerlink" href="#compiling-phase-by-phase" title="Permanent link">link</a></h2>
<p>IREE compiles programs through a series of broad phases:</p>
<pre class="mermaid"><code>graph LR
  accTitle: Compilation phases overview
  accDescr: Input to ABI to Flow to Stream to HAL to VM

  A([Input])
  A --&gt; B([ABI])
  B --&gt; C([Flow])
  C --&gt; D([Stream])
  D --&gt; E([HAL])
  E --&gt; F([VM])</code></pre>
<p>You can output a program snapshot at intermediate phases with the
<code>--compile-to=&lt;phase name&gt;</code> flag:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>cat<span class="w"> </span>simple_abs.mlir

<span class="go">func.func @abs(%input : tensor&lt;f32&gt;) -&gt; (tensor&lt;f32&gt;) {</span>
<span class="gp">  %</span><span class="nv">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>math.absf<span class="w"> </span>%input<span class="w"> </span>:<span class="w"> </span>tensor&lt;f32&gt;
<span class="go">  return %result : tensor&lt;f32&gt;</span>
<span class="go">}</span>

<span class="gp">$ </span>iree-compile<span class="w"> </span>simple_abs.mlir<span class="w"> </span>--compile-to<span class="o">=</span>abi

<span class="go">module {</span>
<span class="go">  func.func @abs(%arg0: !hal.buffer_view) -&gt; !hal.buffer_view attributes {iree.abi.stub} {</span>
<span class="gp">    %</span><span class="nv">0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>hal.tensor.import<span class="w"> </span>%arg0<span class="w"> </span><span class="s2">&quot;input 0&quot;</span><span class="w"> </span>:<span class="w"> </span>!hal.buffer_view<span class="w"> </span>-&gt;<span class="w"> </span>tensor&lt;f32&gt;
<span class="gp">    %</span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>math.absf<span class="w"> </span>%0<span class="w"> </span>:<span class="w"> </span>tensor&lt;f32&gt;
<span class="gp">    %</span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>hal.tensor.export<span class="w"> </span>%1<span class="w"> </span><span class="s2">&quot;output 0&quot;</span><span class="w"> </span>:<span class="w"> </span>tensor&lt;f32&gt;<span class="w"> </span>-&gt;<span class="w"> </span>!hal.buffer_view
<span class="go">    return %2 : !hal.buffer_view</span>
<span class="go">  }</span>
<span class="go">}</span>
</code></pre></div>
<p>This is similar to the <code>--mlir-print-ir-after=</code> flag, but at clearly defined
pipeline phases.</p>
<p>Compilation can be continued from any intermediate phase. This allows for
interative workflows - compile to a phase, make edits to the <code>.mlir</code> file,
then resume compilation and continue through the pipeline:</p>
<div class="highlight"><pre><span></span><code><span class="gp">$ </span>iree-compile<span class="w"> </span>simple_abs.mlir<span class="w"> </span>--compile-to<span class="o">=</span>abi<span class="w"> </span>-o<span class="w"> </span>simple_abs_abi.mlir

<span class="gp">$ </span>sed<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="s1">&#39;s/math.absf/math.exp/&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-e<span class="w"> </span><span class="s1">&#39;s/@abs/@exp/&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>simple_abs_abi.mlir<span class="w"> </span>&gt;<span class="w"> </span>simple_exp_abi.mlir

<span class="gp">$ </span>iree-compile<span class="w"> </span>simple_exp_abi.mlir<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--iree-hal-target-backends<span class="o">=</span>llvm-cpu<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-o<span class="w"> </span>simple_exp_cpu.vmfb
</code></pre></div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 The IREE Authors
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/openxla/iree" target="_blank" rel="noopener" title="IREE on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://discord.gg/26P4xW4" target="_blank" rel="noopener" title="IREE Discord Server" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://groups.google.com/forum/#!forum/iree-discuss" target="_blank" rel="noopener" title="IREE Discuss Google Group" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M144 0a80 80 0 1 1 0 160 80 80 0 1 1 0-160zm368 0a80 80 0 1 1 0 160 80 80 0 1 1 0-160zM0 298.7C0 239.8 47.8 192 106.7 192h42.7c15.9 0 31 3.5 44.6 9.7-1.3 7.2-1.9 14.7-1.9 22.3 0 38.2 16.8 72.5 43.3 96H21.3C9.6 320 0 310.4 0 298.7zM405.3 320h-.7c26.6-23.5 43.3-57.8 43.3-96 0-7.6-.7-15-1.9-22.3 13.6-6.3 28.7-9.7 44.6-9.7h42.7c58.9 0 106.7 47.8 106.7 106.7 0 11.8-9.6 21.3-21.3 21.3H405.3zM224 224a96 96 0 1 1 192 0 96 96 0 1 1-192 0zm-96 261.3c0-73.6 59.7-133.3 133.3-133.3h117.4c73.6 0 133.3 59.7 133.3 133.3 0 14.7-11.9 26.7-26.7 26.7H154.7c-14.7 0-26.7-11.9-26.7-26.7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.tabs", "navigation.top", "navigation.indexes", "toc.follow"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
    
  </body>
</html>